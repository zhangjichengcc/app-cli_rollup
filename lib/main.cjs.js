#!/usr/bin/env node
function t(t){const e=t||new Date;return "string"==typeof e?function(t){let e;if(/^\d{4}[\\/|-]\d{2}[\\/|-]\d{2}T\d{2}:\d{2}:\d{2}/.test(t)){const s=t.replace(/T/g," ").replace(/\.\d{3}Z/g,"").match(/(\d{4})[\\/|-](\d{1,2})[\\/|-](\d{1,2})\s(\d{1,2}):(\d{1,2}):(\d{1,2})/);if(!Array.isArray(s))throw new Error("Incoming parameters Invalid Date");const a=s.splice(1).map((t=>Number(t))),[r,,n,,_,i]=a;let[,h,,d]=a;d+=8,h-=1,e=new Date(r,h,n,d,_,i);}else e=new Date(t.replace(/-/g,"/"));if("Invalid Date"===e.toString())throw new Error("Incoming parameters Invalid Date");return e}(e):e}class e{constructor(t){this.year=t.getFullYear(),this.month=t.getMonth(),this.day=t.getDate(),this.hours=t.getHours(),this.minutes=t.getMinutes(),this.seconds=t.getSeconds(),this.time=t.getTime(),this.week=t.getDay(),this.quarter=Math.floor(this.month/3);}}const s={zh:{months:"一月_二月_三月_四月_五月_六月_七月_八月_九月_十月_十一月_十二月".split("_"),monthsShort:"1月_2月_3月_4月_5月_6月_7月_8月_9月_10月_11月_12月".split("_"),days:"_一日_二日_三日_四日_五日_六日_七日_八日_九日_十日_十一日_十二日_十三日_十四日_十五日_十六日_十七日_十八日_十九日_二十日_二十一日_二十二日_二十三日_二十四日_二十五日_二十六日_二十七日_二十八日_二十九日_三十日_三十一日".split("_"),daysShort:new Array(32).fill("").map(((t,e)=>`${e}日`)),weekdays:"星期日_星期一_星期二_星期三_星期四_星期五_星期六".split("_"),weekdaysShort:"周日_周一_周二_周三_周四_周五_周六".split("_"),weekdaysMin:"日_一_二_三_四_五_六".split("_"),quarter:"春_夏_秋_冬".split("_")},en:{months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),monthsShort:"Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),days:"_1st_2nd_3rd_4th_5th_6th_7th_8th_9th_10th_11th_12th_13th_14th_15th_16th_17th_18th_19th_20th_21st_22nd_23nd_24th_25th_26th_27th_28th_29th_30th_31st".split("_"),daysShort:new Array(32).fill("").map(((t,e)=>e.toString())),weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),weekdaysShort:"Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),weekdaysMin:"Su_Mo_Tu_We_Th_Fr_Sa".split("_"),quarter:"spring_summer_autumn_winter".split("_")}};class a{constructor(t,e){const{year:a,month:r,day:n,hours:_,minutes:i,seconds:h,week:d,quarter:o}=t.dateObject,c=s[e],u=String(a),y=String(r+1),m=String(n),l=String(_),g=String(i),p=String(h),S=String(d),b=String(o+1);this.YYYY=u,this.yyyy=u,this.YY=u.replace(/^[0-9]{2}([0-9]{2})$/,"$1"),this.yy=u.replace(/^[0-9]{2}([0-9]{2})$/,"$1"),this.y=u,this.Y=u,this.MMMM=c.months[r],this.MMM=c.monthsShort[r],this.MM=y.padStart(2,"0"),this.M=y,this.DD=c.days[n],this.dd=m.padStart(2,"0"),this.D=c.daysShort[n],this.d=m,this.HH=l.padStart(2,"0"),this.H=l,this.hh=String((_-1)%12+1).padStart(2,"0"),this.h=String((_-1)%12+1),this.mm=g.toString().padStart(2,"0"),this.m=g.toString(),this.ss=p.toString().padStart(2,"0"),this.s=p.toString(),this.WWW=c.weekdays[d],this.WW=c.weekdaysShort[d],this.W=c.weekdaysMin[d],this.w=S,this.AA=Number(l)<12?"上午":"下午",this.A=Number(l)<12?"AM":"PM",this.a=Number(l)<12?"am":"pm",this.QQ=c.quarter[o],this.Q=["一","二","三","四"][o],this.q=b;}}function r(t="yyyy-MM-dd HH:mm:ss",e){let s=t;const r=new a(this,e);return Object.keys(r).forEach((t=>{const e=new RegExp(`(?!<%*[^%>])${t}(?![^<%]*%>)`,"g");s=s.replace(e,`<%${r[t]}%>`);})),s=s.replace(/[<%|%>]/g,""),s}class n{constructor(t){this.date=t,this.dateObject=new e(t);}clone(){return new n(this.date)}format(t,e){return e=e||"zh",r.call(this,t,e)}add(t,s){t=t||0,s=s||"day";const{year:a,month:r,day:n,hours:_,minutes:i,seconds:h}=this.dateObject,d=new Date("year"===s?a+t:a,"month"===s?r+t:r,"day"===s?n+t:n,"hour"===s?_+t:_,"minute"===s?i+t:i,"second"===s?h+t:h);return this.date=d,this.dateObject=new e(d),this}addDate(t=0,e){e=e||"d";return this.add(t,{y:"year",m:"month",d:"day"}[e])}addTime(t=0,e){e=e||"h";return this.add(t,{h:"hour",m:"minute",s:"second"}[e])}addDay(t=0){return this.add(t,"day")}addWeek(t=0){const e=7*t;return this.add(e,"day")}addMonth(t=0){return this.add(t,"month")}addYear(t=0){return this.add(t,"year")}getTime(){return this.date.getTime()}getDays(){const{year:t,month:e}=this.dateObject;return new Date(t,e,0).getDate()}fromTo(t){return function(t,e){const s=Math.abs(e.dateObject.time-t.dateObject.time),a=e.dateObject.time-t.dateObject.time>0?"+":"-",[r,n]="+"===a?[e,t]:[t,e],_=function(t,e){const s=12*(e.dateObject.year-t.dateObject.year)+(e.dateObject.month-t.dateObject.month);return t.clone().addMonth(s).getTime()>e.getTime()?s-1:s}(n,r),i={years:_/12,months:_,quarters:_/3,seconds:s/1e3,minutes:s/6e4,hours:s/36e5,days:s/864e5,weeks:s/6048e5},h=Object.fromEntries(Object.entries(i).map((([t,e])=>[t,Math.floor(e)]))),d=h.years,o=h.months-12*h.years,c=h.quarters,u=h.seconds-60*h.minutes,y=h.minutes-60*h.hours,m=h.hours-24*h.days,l=function(t,e){let s=e.dateObject.day-t.dateObject.day;const a=(new Date(e.dateObject.year,e.dateObject.month,e.dateObject.day).getTime()-new Date(t.dateObject.year,t.dateObject.month,t.dateObject.day).getTime())/864e5,r=t.clone().addDay(a),n=t.getDays();return s+=r.getTime()>e.getTime()?-1:0,s+=s<0?n:0,s}(n,r),g=h.weeks;return {total:h,wholeTotal:i,tag:a,years:d,months:o,quarters:c,weeks:g,days:l,hours:m,minutes:y,seconds:u,format:function(t){let e="";if(t){e=t;const s={y:d,M:o,d:l,h:m,m:y,s:u};Object.keys(s).forEach((t=>{e=e.replace(t,String(s[t]));}));}else e=(d?`${d}年`:"")+(o?`${o}个月`:"")+(!d&&l?`${l}天`:"")+(d||o||!m?"":`${m}小时`)+(d||o||l||!y?"":`${y}分钟`)+(d||o||l||m||!u?"":`${u}秒`)+("+"===a?"后":"前");return e}}}(this,_(t))}}function _(e){return e=t(e),new n(e)}

/**
 * @description: 格式化时间
 * @param {Date} time
 * @return {*}
 */
function formatDate(time) {
    return _(time).format();
}
/**
 * @description: 返回当前时间
 * @return {*}
 */
function now() {
    return _().format();
}

export { formatDate, now };
